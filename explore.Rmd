---
title: "Explore"
author: "Lukas Nick"
date: "16. Oktoober 2015"
output: html_document
---

```{r}
# Preparatory work: load the businesses table.
source('db.R')
buss.rs = query('select id, business_id, name, full_address, city, state, longitude, latitude, stars, review_counts, attribs::json, open from businesses')
buss = dbFetch(buss.rs, -1)
```

# Exploratory Analysis

1. Explore the relationships between different features in each data file.
2. Try linking data files together and explore the relationships between features across data files.
3. Identify interesting outcomes that you may want to predict as part of a prediction question / problem
4. Characterize any missing data that may be present in each of the files
5. Many features incorporate free-text data that may need to be parsed, summarized, or quantified in some way. What is the best way to handle these data?

## 1. Relationships between features in each data file

### 1.1. Relationsships in the Business file

#### Potential features:

* City
* State
* Longitute/Latitude
* Stars
* Review_count
* Neighborhoods
* Attributes
* Open

#### Quiz

```{r}

has.wifi.attr <- function(jsontext) {
  attr <- fromJSON(jsontext)
  'Wi-Fi' %in% names(attr)
}
has.wifi <- sapply(buss$attribs, has.wifi.attr)
num.has.wifi <- sum(has.wifi)
has.wifi.attr.free <- function(jsontext) {
  attr <- fromJSON(jsontext)
  if (is.null(attr['Wi-Fi'])){
    return(FALSE)
  }
  else {
    return(attr['Wi-Fi'] == "free")
  }
}
has.wifi.free <- sapply(buss$attribs, has.wifi.attr.free)
```

#### Review_count-Stars relationship

```{r}
with(buss, plot(review_counts, stars))
```


#### Neighborhood-Stars relationship

```{r}

busns <- 
```


#### Regression: Neighborhood, Review_count on Stars

```{r}
summary(buss)
```

#### Attributes-Stars relationship

```{r}
summary(cars)
```

You can also embed plots, for example:

```{r, echo=FALSE}
plot(cars)
```

Note that the `echo = FALSE` parameter was added to the code chunk to prevent printing of the R code that generated the plot.
